import{u as O}from"./store-D_d_-cPu.js";import{_ as Y}from"./placeholder-CJXH1PU4.js";import{V as b,P as U}from"./ProductCard-NqFy1nlt.js";import{V as h,a as W,u as Z}from"./VAvatar-CXRlG9Og.js";import{d as T,k,l as M,b as m,o as f,c as y,a as r,w as u,F as p,e as C,h as ee,g as I,p as te,m as ne,q as re,s as ie,v as ae,x as oe,y as G,j as le,z as se,A as P,B as ce,C as ue,D as de,E as fe,G as F,i as me,H as q}from"./index-5wHnQgee.js";import{V as ge}from"./VContainer-DHk0Yzo2.js";import{V as E}from"./VSheet-DeObkklv.js";import"./VCard-BmWdvpZk.js";import"./VImg-WM_11JZ6.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ve={getImageUrl(e){try{const a=JSON.parse(e);return/png|jpg|jpeg|svg|picsum/.test(a)?a[0]:Y}catch{return e[0]}},generateRandomNumber(e,a){return Math.floor(Math.random()*(a-e+1)+e)}},ye=ee("h2",null,"Top Products",-1),_e=T({__name:"TopProducts",setup(e){const a=O(),n=k([]),c=k(!0),i=async()=>{const l=ve.generateRandomNumber(10,20);n.value=await a.getProducts({offset:l,limit:8}),c.value=!1};return M(async()=>{i()}),(l,_)=>m(c)?(f(),y(p,{key:0},[r(h,{class:"mt-5 mb-5"},{default:u(()=>[r(b,{type:"heading",width:"200"})]),_:1}),r(h,{justify:"space-between"},{default:u(()=>[(f(),y(p,null,C(5,d=>r(b,{key:d,class:"mb-3 mx-2 rounded",type:"image@2, text@3",width:"400"})),64))]),_:1})],64)):(f(),y(p,{key:1},[r(h,{class:"mt-5 mb-5"},{default:u(()=>[ye]),_:1}),r(h,{justify:"start",align:"center"},{default:u(()=>[(f(!0),y(p,null,C(m(n),d=>(f(),I(W,{cols:"12",sm:"4",lg:"3","alig-self":"center",key:d.id},{default:u(()=>[r(U,{product:d,loading:m(a).loading||m(c)},null,8,["product","loading"])]),_:2},1024))),128))]),_:1})],64))}}),Se=te({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...ne(),...re()},"VInfiniteScroll"),H=ie({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,a)=>!0},setup(e,a){let{emit:n}=a;const{intersectionRef:c,isIntersecting:i}=ae();return oe(i,async l=>{n("intersect",e.side,l)}),G(()=>r("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:c},[le("Â ")])),{}}}),he=se()({name:"VInfiniteScroll",props:Se(),emits:{load:e=>!0},setup(e,a){let{slots:n,emit:c}=a;const i=k(),l=P("ok"),_=P("ok"),d=ce(()=>ue(e.margin)),g=P(!1);function S(t){if(!i.value)return;const o=e.direction==="vertical"?"scrollTop":"scrollLeft";i.value[o]=t}function J(){if(!i.value)return 0;const t=e.direction==="vertical"?"scrollTop":"scrollLeft";return i.value[t]}function V(){if(!i.value)return 0;const t=e.direction==="vertical"?"scrollHeight":"scrollWidth";return i.value[t]}function K(){if(!i.value)return 0;const t=e.direction==="vertical"?"clientHeight":"clientWidth";return i.value[t]}M(()=>{i.value&&(e.side==="start"?S(V()):e.side==="both"&&S(V()/2-K()/2))});function L(t,o){t==="start"?l.value=o:t==="end"&&(_.value=o)}function Q(t){return t==="start"?l.value:_.value}let D=0;function A(t,o){g.value=o,g.value&&x(t)}function x(t){if(e.mode!=="manual"&&!g.value)return;const o=Q(t);if(!i.value||["empty","loading"].includes(o))return;D=V(),L(t,"loading");function v(s){L(t,s),q(()=>{s==="empty"||s==="error"||(s==="ok"&&t==="start"&&S(V()-D+J()),e.mode!=="manual"&&q(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{x(t)})})})}))})}c("load",{side:t,done:v})}const{t:N}=de();function R(t,o){var w,$,j,z,B;if(e.side!==t&&e.side!=="both")return;const v=()=>x(t),s={side:t,props:{onClick:v,color:e.color}};return o==="error"?(w=n.error)==null?void 0:w.call(n,s):o==="empty"?(($=n.empty)==null?void 0:$.call(n,s))??r("div",null,[N(e.emptyText)]):e.mode==="manual"?o==="loading"?((j=n.loading)==null?void 0:j.call(n,s))??r(F,{indeterminate:!0,color:e.color},null):((z=n["load-more"])==null?void 0:z.call(n,s))??r(me,{variant:"outlined",color:e.color,onClick:v},{default:()=>[N(e.loadMoreText)]}):((B=n.loading)==null?void 0:B.call(n,s))??r(F,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:X}=fe(e);G(()=>{const t=e.tag,o=e.side==="start"||e.side==="both",v=e.side==="end"||e.side==="both",s=e.mode==="intersect";return r(t,{ref:i,class:["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":o,"v-infinite-scroll--end":v}],style:X.value},{default:()=>{var w;return[r("div",{class:"v-infinite-scroll__side"},[R("start",l.value)]),o&&s&&r(H,{key:"start",side:"start",onIntersect:A,rootMargin:d.value},null),(w=n.default)==null?void 0:w.call(n),v&&s&&r(H,{key:"end",side:"end",onIntersect:A,rootMargin:d.value},null),r("div",{class:"v-infinite-scroll__side"},[R("end",_.value)])]}})})}}),pe={key:1},ke=T({__name:"DailyDiscover",setup(e){const a=O(),n=Z(),c=k([]),i=k(10),l=k(!1),_=async({done:d})=>{l.value=!0;const g=await a.getProducts({offset:i.value,limit:10});if(c.value.push(...g),g.length<=0){d("empty"),l.value=!1;return}i.value+=10,d("ok"),l.value=!1};return M(async()=>{c.value=await a.getProducts({offset:i.value,limit:10}),n.setCartInLocalStorage()}),(d,g)=>(f(),y(p,null,[r(h,{class:"mt-10 mb-5"},{default:u(()=>[m(l)||!m(c).length?(f(),I(b,{key:0,type:"heading",width:"200"})):(f(),y("h2",pe,"Daily Discover"))]),_:1}),r(he,{onLoad:_,width:"100%",class:"overflow-hidden","empty-text":""},{default:u(()=>[r(h,{justify:"start",align:"center"},{default:u(()=>[(f(!0),y(p,null,C(m(c),S=>(f(),I(W,{key:S.id,cols:"12",sm:"4",md:"3",xl:"2","alig-self":"center"},{default:u(()=>[r(U,{product:S,loading:m(l)},null,8,["product","loading"])]),_:2},1024))),128))]),_:1})]),_:1})],64))}}),De=T({__name:"Home",setup(e){return(a,n)=>(f(),I(ge,null,{default:u(()=>[r(E,{id:"topProducts"},{default:u(()=>[r(_e)]),_:1}),r(E,{id:"dailyDiscover"},{default:u(()=>[r(ke)]),_:1})]),_:1}))}});export{De as default};
