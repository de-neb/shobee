import{u as O}from"./store-DVDP5iW-.js";import{_ as Y}from"./placeholder-CJXH1PU4.js";import{V as b,P as U}from"./ProductCard-CrdvebHg.js";import{V as h,a as W}from"./VAvatar-BIS29vSf.js";import{d as C,k as p,l as M,b as g,o as d,c as y,a as r,w as s,F as S,e as T,h as Z,g as V,p as ee,m as te,q as ne,s as re,v as ie,x as ae,y as G,j as oe,z as le,A as P,B as se,C as ce,D as ue,E as de,G as F,i as fe,H as q}from"./index-B_vA2bDn.js";import{V as me}from"./VContainer-D_DvqGzA.js";import{V as E}from"./VSheet-_0ELm6eM.js";import"./VCard-CnsIUaI0.js";import"./VImg-Bt_LHd7b.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const ge={getImageUrl(e){try{const a=JSON.parse(e);return/png|jpg|jpeg|svg|picsum/.test(a)?a[0]:Y}catch{return e[0]}},generateRandomNumber(e,a){return Math.floor(Math.random()*(a-e+1)+e)}},ve=Z("h2",null,"Top Products",-1),ye=C({__name:"TopProducts",setup(e){const a=O(),t=p([]),c=p(!0),i=async()=>{const f=ge.generateRandomNumber(10,20);t.value=await a.getProducts({offset:f,limit:8}),c.value=!1};return M(async()=>{i()}),(f,m)=>g(c)?(d(),y(S,{key:0},[r(h,{class:"mt-5 mb-5"},{default:s(()=>[r(b,{type:"heading",width:"200"})]),_:1}),r(h,{justify:"space-between"},{default:s(()=>[(d(),y(S,null,T(5,u=>r(b,{key:u,class:"mb-3 mx-2 rounded",type:"image@2, text@3",width:"400"})),64))]),_:1})],64)):(d(),y(S,{key:1},[r(h,{class:"mt-5 mb-5"},{default:s(()=>[ve]),_:1}),r(h,{justify:"start",align:"center"},{default:s(()=>[(d(!0),y(S,null,T(g(t),u=>(d(),V(W,{cols:"12",sm:"4",lg:"3","alig-self":"center",key:u.id},{default:s(()=>[r(U,{product:u,loading:g(a).loading||g(c)},null,8,["product","loading"])]),_:2},1024))),128))]),_:1})],64))}}),_e=ee({color:String,direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},side:{type:String,default:"end",validator:e=>["start","end","both"].includes(e)},mode:{type:String,default:"intersect",validator:e=>["intersect","manual"].includes(e)},margin:[Number,String],loadMoreText:{type:String,default:"$vuetify.infiniteScroll.loadMore"},emptyText:{type:String,default:"$vuetify.infiniteScroll.empty"},...te(),...ne()},"VInfiniteScroll"),H=re({name:"VInfiniteScrollIntersect",props:{side:{type:String,required:!0},rootMargin:String},emits:{intersect:(e,a)=>!0},setup(e,a){let{emit:t}=a;const{intersectionRef:c,isIntersecting:i}=ie();return ae(i,async f=>{t("intersect",e.side,f)}),G(()=>r("div",{class:"v-infinite-scroll-intersect",style:{"--v-infinite-margin-size":e.rootMargin},ref:c},[oe("Â ")])),{}}}),he=le()({name:"VInfiniteScroll",props:_e(),emits:{load:e=>!0},setup(e,a){let{slots:t,emit:c}=a;const i=p(),f=P("ok"),m=P("ok"),u=se(()=>ce(e.margin)),_=P(!1);function x(n){if(!i.value)return;const o=e.direction==="vertical"?"scrollTop":"scrollLeft";i.value[o]=n}function J(){if(!i.value)return 0;const n=e.direction==="vertical"?"scrollTop":"scrollLeft";return i.value[n]}function w(){if(!i.value)return 0;const n=e.direction==="vertical"?"scrollHeight":"scrollWidth";return i.value[n]}function K(){if(!i.value)return 0;const n=e.direction==="vertical"?"clientHeight":"clientWidth";return i.value[n]}M(()=>{i.value&&(e.side==="start"?x(w()):e.side==="both"&&x(w()/2-K()/2))});function D(n,o){n==="start"?f.value=o:n==="end"&&(m.value=o)}function Q(n){return n==="start"?f.value:m.value}let L=0;function A(n,o){_.value=o,_.value&&I(n)}function I(n){if(e.mode!=="manual"&&!_.value)return;const o=Q(n);if(!i.value||["empty","loading"].includes(o))return;L=w(),D(n,"loading");function v(l){D(n,l),q(()=>{l==="empty"||l==="error"||(l==="ok"&&n==="start"&&x(w()-L+J()),e.mode!=="manual"&&q(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{window.requestAnimationFrame(()=>{I(n)})})})}))})}c("load",{side:n,done:v})}const{t:N}=ue();function R(n,o){var k,$,j,z,B;if(e.side!==n&&e.side!=="both")return;const v=()=>I(n),l={side:n,props:{onClick:v,color:e.color}};return o==="error"?(k=t.error)==null?void 0:k.call(t,l):o==="empty"?(($=t.empty)==null?void 0:$.call(t,l))??r("div",null,[N(e.emptyText)]):e.mode==="manual"?o==="loading"?((j=t.loading)==null?void 0:j.call(t,l))??r(F,{indeterminate:!0,color:e.color},null):((z=t["load-more"])==null?void 0:z.call(t,l))??r(fe,{variant:"outlined",color:e.color,onClick:v},{default:()=>[N(e.loadMoreText)]}):((B=t.loading)==null?void 0:B.call(t,l))??r(F,{indeterminate:!0,color:e.color},null)}const{dimensionStyles:X}=de(e);G(()=>{const n=e.tag,o=e.side==="start"||e.side==="both",v=e.side==="end"||e.side==="both",l=e.mode==="intersect";return r(n,{ref:i,class:["v-infinite-scroll",`v-infinite-scroll--${e.direction}`,{"v-infinite-scroll--start":o,"v-infinite-scroll--end":v}],style:X.value},{default:()=>{var k;return[r("div",{class:"v-infinite-scroll__side"},[R("start",f.value)]),o&&l&&r(H,{key:"start",side:"start",onIntersect:A,rootMargin:u.value},null),(k=t.default)==null?void 0:k.call(t),v&&l&&r(H,{key:"end",side:"end",onIntersect:A,rootMargin:u.value},null),r("div",{class:"v-infinite-scroll__side"},[R("end",m.value)])]}})})}}),Se={key:1},pe=C({__name:"DailyDiscover",setup(e){const a=O(),t=p([]),c=p(10),i=p(!1),f=async({done:m})=>{i.value=!0;const u=await a.getProducts({offset:c.value,limit:10});if(t.value.push(...u),u.length<=0){m("empty"),i.value=!1;return}c.value+=10,m("ok"),i.value=!1};return M(async()=>{t.value=await a.getProducts({offset:c.value,limit:10})}),(m,u)=>(d(),y(S,null,[r(h,{class:"mt-10 mb-5"},{default:s(()=>[g(i)||!g(t).length?(d(),V(b,{key:0,type:"heading",width:"200"})):(d(),y("h2",Se,"Daily Discover"))]),_:1}),r(he,{onLoad:f,width:"100%",class:"overflow-hidden","empty-text":""},{default:s(()=>[r(h,{justify:"start",align:"center"},{default:s(()=>[(d(!0),y(S,null,T(g(t),_=>(d(),V(W,{key:_.id,cols:"12",sm:"4",md:"3",xl:"2","alig-self":"center"},{default:s(()=>[r(U,{product:_,loading:g(i)},null,8,["product","loading"])]),_:2},1024))),128))]),_:1})]),_:1})],64))}}),De=C({__name:"Home",setup(e){return(a,t)=>(d(),V(me,null,{default:s(()=>[r(E,{id:"topProducts"},{default:s(()=>[r(ye)]),_:1}),r(E,{id:"dailyDiscover"},{default:s(()=>[r(pe)]),_:1})]),_:1}))}});export{De as default};
