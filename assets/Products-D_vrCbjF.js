import{_ as Ae}from"./QuantityInput.vue_vue_type_style_index_0_lang-DN28df5H.js";import{_ as Re}from"./BreadCrumb.vue_vue_type_script_setup_true_lang-CN83jL8I.js";import{_ as ne}from"./placeholder-CJXH1PU4.js";import{u as se}from"./store-DY8Oarl0.js";import{d as Fe,V,a as k,c as je}from"./VAvatar-DS4I_HOZ.js";import{p as D,S as q,a6 as R,al as N,k as E,B as P,am as J,an as oe,x as Z,ao as ce,a4 as W,ap as Q,D as Oe,aq as G,ar as ue,L as Ee,q as Ne,ab as Ge,z as Le,y as $e,a as u,ag as qe,as as Me,d as ie,u as de,l as me,b as S,o as _,g as I,w as m,c as F,e as j,F as O,j as X,h as A,i as M,t as B,I as H,n as L,ak as ze}from"./index-DUnBgF1C.js";import{V as x,P as Ke}from"./ProductCard-D5vaP3yq.js";import{V as Y}from"./VContainer-Dx05ujtg.js";import{a as Ue,b as We,V as fe}from"./VCard-DRs3v6o_.js";import{m as Qe,u as He}from"./filter-Da3TvYPm.js";import{V as Je}from"./VSheet-CE-Fa3-E.js";import{V as Xe,a as Ye}from"./VCarouselItem-Dchnc75D.js";import{V as $}from"./VImg-CTSEXcE7.js";import"./VTextField-CDIlxWMX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Ze=D({expandOnClick:Boolean,showExpand:Boolean,expanded:{type:Array,default:()=>[]}},"DataTable-expand"),et=Symbol.for("vuetify:datatable:expanded");function tt(t){const e=q(t,"expandOnClick"),r=R(t,"expanded",t.expanded,n=>new Set(n),n=>[...n.values()]);function a(n,d){const f=new Set(r.value);d?f.add(n.value):f.delete(n.value),r.value=f}function l(n){return r.value.has(n.value)}function i(n){a(n,!l(n))}const s={expand:a,expanded:r,expandOnClick:e,isExpanded:l,toggleExpand:i};return N(et,s),s}const at=D({groupBy:{type:Array,default:()=>[]}},"DataTable-group"),rt=Symbol.for("vuetify:data-table-group");function lt(t){const{disableSort:e,groupBy:r,sortBy:a}=t,l=E(new Set),i=P(()=>r.value.map(c=>({...c,order:c.order??!1})).concat(e!=null&&e.value?[]:a.value));function s(c){return l.value.has(c.id)}function n(c){const o=new Set(l.value);s(c)?o.delete(c.id):o.add(c.id),l.value=o}function d(c){function o(y){const w=[];for(const p of y.items)"type"in p&&p.type==="group"?w.push(...o(p)):w.push(p);return w}return o({type:"group",items:c,id:"dummy",key:"dummy",value:"dummy",depth:0})}const f={sortByWithGroups:i,toggleGroup:n,opened:l,groupBy:r,extractRows:d,isGroupOpen:s};return N(rt,f),f}function nt(t,e){if(!t.length)return[];const r=new Map;for(const a of t){const l=J(a.raw,e);r.has(l)||r.set(l,[]),r.get(l).push(a)}return r}function ge(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"root";if(!e.length)return[];const l=nt(t,e[0]),i=[],s=e.slice(1);return l.forEach((n,d)=>{const f=e[0],c=`${a}_${f}_${d}`;i.push({depth:r,id:c,key:f,value:d,items:s.length?ge(n,s,r+1,c):n,type:"group"})}),i}function ve(t,e){const r=[];for(const a of t)"type"in a&&a.type==="group"?(a.value!=null&&r.push(a),(e.has(a.id)||a.value==null)&&r.push(...ve(a.items,e))):r.push(a);return r}function ut(t,e,r){return{flatItems:P(()=>{if(!e.value.length)return t.value;const l=ge(t.value,e.value.map(i=>i.key));return ve(l,r.value)})}}function st(t){let{page:e,itemsPerPage:r,sortBy:a,groupBy:l,search:i}=t;const s=oe("VDataTable"),n=P(()=>({page:e.value,itemsPerPage:r.value,sortBy:a.value,groupBy:l.value,search:i.value}));let d=null;Z(n,()=>{ce(d,n.value)||(d&&d.search!==n.value.search&&(e.value=1),s.emit("update:options",n.value),d=n.value)},{deep:!0,immediate:!0})}const ot=D({page:{type:[Number,String],default:1},itemsPerPage:{type:[Number,String],default:10}},"DataTable-paginate"),ct=Symbol.for("vuetify:data-table-pagination");function it(t){const e=R(t,"page",void 0,a=>+(a??1)),r=R(t,"itemsPerPage",void 0,a=>+(a??10));return{page:e,itemsPerPage:r}}function dt(t){const{page:e,itemsPerPage:r,itemsLength:a}=t,l=P(()=>r.value===-1?0:r.value*(e.value-1)),i=P(()=>r.value===-1?a.value:Math.min(a.value,l.value+r.value)),s=P(()=>r.value===-1||a.value===0?1:Math.ceil(a.value/r.value));Z([e,s],()=>{e.value>s.value&&(e.value=s.value)});function n(y){r.value=y,e.value=1}function d(){e.value=W(e.value+1,1,s.value)}function f(){e.value=W(e.value-1,1,s.value)}function c(y){e.value=W(y,1,s.value)}const o={page:e,itemsPerPage:r,startIndex:l,stopIndex:i,pageCount:s,itemsLength:a,nextPage:d,prevPage:f,setPage:c,setItemsPerPage:n};return N(ct,o),o}function mt(t){const e=oe("usePaginatedItems"),{items:r,startIndex:a,stopIndex:l,itemsPerPage:i}=t,s=P(()=>i.value<=0?r.value:r.value.slice(a.value,l.value));return Z(s,n=>{e.emit("update:currentItems",n)}),{paginatedItems:s}}const ft={showSelectAll:!1,allSelected:()=>[],select:t=>{var a;let{items:e,value:r}=t;return new Set(r?[(a=e[0])==null?void 0:a.value]:[])},selectAll:t=>{let{selected:e}=t;return e}},ye={showSelectAll:!0,allSelected:t=>{let{currentPage:e}=t;return e},select:t=>{let{items:e,value:r,selected:a}=t;for(const l of e)r?a.add(l.value):a.delete(l.value);return a},selectAll:t=>{let{value:e,currentPage:r,selected:a}=t;return ye.select({items:r,value:e,selected:a})}},pe={showSelectAll:!0,allSelected:t=>{let{allItems:e}=t;return e},select:t=>{let{items:e,value:r,selected:a}=t;for(const l of e)r?a.add(l.value):a.delete(l.value);return a},selectAll:t=>{let{value:e,allItems:r,selected:a}=t;return pe.select({items:r,value:e,selected:a})}},gt=D({showSelect:Boolean,selectStrategy:{type:[String,Object],default:"page"},modelValue:{type:Array,default:()=>[]},valueComparator:{type:Function,default:ce}},"DataTable-select"),vt=Symbol.for("vuetify:data-table-selection");function yt(t,e){let{allItems:r,currentPage:a}=e;const l=R(t,"modelValue",t.modelValue,v=>new Set(Q(v).map(h=>{var C;return((C=r.value.find(z=>t.valueComparator(h,z.value)))==null?void 0:C.value)??h})),v=>[...v.values()]),i=P(()=>r.value.filter(v=>v.selectable)),s=P(()=>a.value.filter(v=>v.selectable)),n=P(()=>{if(typeof t.selectStrategy=="object")return t.selectStrategy;switch(t.selectStrategy){case"single":return ft;case"all":return pe;case"page":default:return ye}});function d(v){return Q(v).every(h=>l.value.has(h.value))}function f(v){return Q(v).some(h=>l.value.has(h.value))}function c(v,h){const C=n.value.select({items:v,value:h,selected:new Set(l.value)});l.value=C}function o(v){c([v],!d([v]))}function y(v){const h=n.value.selectAll({value:v,allItems:i.value,currentPage:s.value,selected:new Set(l.value)});l.value=h}const w=P(()=>l.value.size>0),p=P(()=>{const v=n.value.allSelected({allItems:i.value,currentPage:s.value});return!!v.length&&d(v)}),g=P(()=>n.value.showSelectAll),b={toggleSelect:o,select:c,selectAll:y,isSelected:d,isSomeSelected:f,someSelected:w,allSelected:p,showSelectAll:g};return N(vt,b),b}const pt=D({sortBy:{type:Array,default:()=>[]},customKeySort:Object,multiSort:Boolean,mustSort:Boolean},"DataTable-sort"),ht=Symbol.for("vuetify:data-table-sort");function St(t){const e=R(t,"sortBy"),r=q(t,"mustSort"),a=q(t,"multiSort");return{sortBy:e,mustSort:r,multiSort:a}}function Pt(t){const{sortBy:e,mustSort:r,multiSort:a,page:l}=t,i=d=>{if(d.key==null)return;let f=e.value.map(o=>({...o}))??[];const c=f.find(o=>o.key===d.key);c?c.order==="desc"?r.value?c.order="asc":f=f.filter(o=>o.key!==d.key):c.order="desc":a.value?f=[...f,{key:d.key,order:"asc"}]:f=[{key:d.key,order:"asc"}],e.value=f,l&&(l.value=1)};function s(d){return!!e.value.find(f=>f.key===d.key)}const n={sortBy:e,toggleSort:i,isSorted:s};return N(ht,n),n}function wt(t,e,r,a){const l=Oe();return{sortedItems:P(()=>{var s,n;return r.value.length?bt(e.value,r.value,l.current.value,{transform:a==null?void 0:a.transform,sortFunctions:{...t.customKeySort,...(s=a==null?void 0:a.sortFunctions)==null?void 0:s.value},sortRawFunctions:(n=a==null?void 0:a.sortRawFunctions)==null?void 0:n.value}):e.value})}}function bt(t,e,r,a){const l=new Intl.Collator(r,{sensitivity:"accent",usage:"sort"});return t.map(s=>[s,a!=null&&a.transform?a.transform(s):s]).sort((s,n)=>{var d,f;for(let c=0;c<e.length;c++){let o=!1;const y=e[c].key,w=e[c].order??"asc";if(w===!1)continue;let p=J(s[1],y),g=J(n[1],y),b=s[0].raw,v=n[0].raw;if(w==="desc"&&([p,g]=[g,p],[b,v]=[v,b]),(d=a==null?void 0:a.sortRawFunctions)!=null&&d[y]){const h=a.sortRawFunctions[y](b,v);if(h==null)continue;if(o=!0,h)return h}if((f=a==null?void 0:a.sortFunctions)!=null&&f[y]){const h=a.sortFunctions[y](p,g);if(h==null)continue;if(o=!0,h)return h}if(!o){if(p instanceof Date&&g instanceof Date)return p.getTime()-g.getTime();if([p,g]=[p,g].map(h=>h!=null?h.toString().toLocaleLowerCase():h),p!==g)return G(p)&&G(g)?0:G(p)?-1:G(g)?1:!isNaN(p)&&!isNaN(g)?Number(p)-Number(g):l.compare(p,g)}}return 0}).map(s=>{let[n]=s;return n})}const _t=D({items:{type:Array,default:()=>[]},itemValue:{type:[String,Array,Function],default:"id"},itemSelectable:{type:[String,Array,Function],default:null},returnObject:Boolean},"DataIterator-items");function It(t,e){const r=t.returnObject?e:ue(e,t.itemValue),a=ue(e,t.itemSelectable,!0);return{type:"item",value:r,selectable:a,raw:e}}function kt(t,e){const r=[];for(const a of e)r.push(It(t,a));return r}function xt(t){return{items:P(()=>kt(t,t.items))}}const Vt=D({search:String,loading:Boolean,...Ee(),..._t(),...gt(),...pt(),...ot({itemsPerPage:5}),...Ze(),...at(),...Qe(),...Ne(),...Ge({transition:{component:Fe,hideOnLeave:!0}})},"VDataIterator"),Ct=Le()({name:"VDataIterator",props:Vt(),emits:{"update:modelValue":t=>!0,"update:groupBy":t=>!0,"update:page":t=>!0,"update:itemsPerPage":t=>!0,"update:sortBy":t=>!0,"update:options":t=>!0,"update:expanded":t=>!0,"update:currentItems":t=>!0},setup(t,e){let{slots:r}=e;const a=R(t,"groupBy"),l=q(t,"search"),{items:i}=xt(t),{filteredItems:s}=He(t,i,l,{transform:T=>T.raw}),{sortBy:n,multiSort:d,mustSort:f}=St(t),{page:c,itemsPerPage:o}=it(t),{toggleSort:y}=Pt({sortBy:n,multiSort:d,mustSort:f,page:c}),{sortByWithGroups:w,opened:p,extractRows:g,isGroupOpen:b,toggleGroup:v}=lt({groupBy:a,sortBy:n}),{sortedItems:h}=wt(t,s,w,{transform:T=>T.raw}),{flatItems:C}=ut(h,a,p),z=P(()=>C.value.length),{startIndex:he,stopIndex:Se,pageCount:Pe,prevPage:we,nextPage:be,setItemsPerPage:_e,setPage:Ie}=dt({page:c,itemsPerPage:o,itemsLength:z}),{paginatedItems:K}=mt({items:C,startIndex:he,stopIndex:Se,itemsPerPage:o}),ee=P(()=>g(K.value)),{isSelected:ke,select:xe,selectAll:Ve,toggleSelect:Ce}=yt(t,{allItems:i,currentPage:ee}),{isExpanded:Be,toggleExpand:De}=tt(t);st({page:c,itemsPerPage:o,sortBy:n,groupBy:a,search:l});const U=P(()=>({page:c.value,itemsPerPage:o.value,sortBy:n.value,pageCount:Pe.value,toggleSort:y,prevPage:we,nextPage:be,setPage:Ie,setItemsPerPage:_e,isSelected:ke,select:xe,selectAll:Ve,toggleSelect:Ce,isExpanded:Be,toggleExpand:De,isGroupOpen:b,toggleGroup:v,items:ee.value,groupedItems:K.value}));return $e(()=>u(t.tag,{class:["v-data-iterator",{"v-data-iterator--loading":t.loading},t.class],style:t.style},{default:()=>{var T,te;return[(T=r.header)==null?void 0:T.call(r,U.value),u(qe,{transition:t.transition},{default:()=>{var ae,re;return[t.loading?u(Me,{key:"loader",name:"v-data-iterator",active:!0},{default:Te=>{var le;return(le=r.loader)==null?void 0:le.call(r,Te)}}):u("div",{key:"items"},[K.value.length?(re=r.default)==null?void 0:re.call(r,U.value):(ae=r["no-data"])==null?void 0:ae.call(r)])]}}),(te=r.footer)==null?void 0:te.call(r,U.value)]}})),{}}}),Bt={class:"d-flex align-center justify-center pa-4"},Dt={class:"mx-2 text-caption"},Tt=ie({__name:"ProductRelated",props:{categoryId:String},setup(t){const e=t,r=se(),{lgAndUp:a}=de(),l=E([]),i=E(!1),s=P(()=>a&&l.value.length>6?4:-1),n=async()=>{i.value=!0,l.value=await r.filterProducts(e.categoryId),i.value=!1};return me(()=>{n()}),(d,f)=>S(i)?(_(),I(Y,{key:0,fluid:""},{default:m(()=>[u(V,null,{default:m(()=>[u(x,{type:"heading",width:"300"})]),_:1}),u(V,{justify:"space-between",class:"flex-nowrap"},{default:m(()=>[(_(),F(O,null,j(5,c=>u(x,{key:c,class:"mx-2",type:"image@2, text@2",width:"350"})),64))]),_:1})]),_:1})):(_(),I(fe,{key:1,variant:"flat",fluid:""},{default:m(()=>[u(Ue,{class:"text-h5"},{default:m(()=>[X("Related Products")]),_:1}),u(We,null,{default:m(()=>[u(Ct,{items:S(l),"items-per-page":S(s)},{default:m(({items:c})=>[u(V,null,{default:m(()=>[(_(!0),F(O,null,j(c,o=>(_(),I(k,{cols:"12",sm:"6",md:"4",lg:"3","alig-self":"center",key:o.id},{default:m(()=>[u(Ke,{product:o.raw,loading:S(i)},null,8,["product","loading"])]),_:2},1024))),128))]),_:2},1024)]),footer:m(({page:c,pageCount:o,prevPage:y,nextPage:w})=>[A("div",Bt,[u(M,{disabled:c===1,density:"comfortable",icon:"mdi-arrow-left",variant:"tonal",rounded:"",onClick:y},null,8,["disabled","onClick"]),A("div",Dt," Page "+B(c)+" of "+B(o),1),u(M,{disabled:c>=o,density:"comfortable",icon:"mdi-arrow-right",variant:"tonal",rounded:"",onClick:w},null,8,["disabled","onClick"])])]),_:1},8,["items","items-per-page"])]),_:1})]),_:1}))}}),At={class:"text-grey"},Rt={class:"text-h4 font-weight-black"},Ft={class:"text-body-1 font-weight-regular text-grey"},Jt=ie({__name:"Products",setup(t){const e=se(),r=je(),{smAndDown:a}=de(),l=E(""),i=E(0),s=P(()=>{var o,y;return(y=(o=e.viewingProduct)==null?void 0:o.category)==null?void 0:y.id}),n=async()=>{const o=H.currentRoute.value.params.id;await e.getProductById(o)},d=o=>{i.value=o},f=()=>{r.updateProductQuantityInCart({...e.viewingProduct}),e.viewingProduct.quantity=1},c=()=>{f(),H.push({name:"Checkout"})};return H.beforeEach(async(o,y)=>{var w;if(o.name==="Product"&&!((w=o.meta)!=null&&w.productName)){const p=o.params.id;await e.getProductById(p)}}),me(async()=>{await n(),l.value=e.viewingProduct.images[0]}),(o,y)=>{const w=Re,p=Ae;return S(e).loading?(_(),I(Y,{key:0,fluid:""},{default:m(()=>[u(Je,{height:"auto"},{default:m(()=>[u(V,{justify:"center"},{default:m(()=>[u(x,{type:"heading",width:"500"})]),_:1}),u(V,{justify:"center"},{default:m(()=>[u(k,{cols:"12",sm:"5",md:"1",class:L({"d-flex ga-1":S(a)})},{default:m(()=>[(_(),F(O,null,j(3,g=>u(x,{type:"image",width:"100%",key:g})),64))]),_:1},8,["class"]),u(k,{cols:"12",md:"4"},{default:m(()=>[u(x,{type:"image@4"})]),_:1}),u(k,{cols:"12",md:"4"},{default:m(()=>[u(x,{type:"heading"}),u(x,{type:"heading"}),u(x,{type:"subtitle"}),u(x,{type:"text@10"}),u(x,{type:"button"})]),_:1})]),_:1})]),_:1})]),_:1})):(_(),I(Y,{key:1,class:"d-flex flex-column",fluid:""},{default:m(()=>[u(V,{justify:"center"},{default:m(()=>[u(w)]),_:1}),u(V,{justify:"center"},{default:m(()=>[u(k,{cols:"12",sm:"auto",class:L({"d-flex ga-2 justify-center":S(a)})},{default:m(()=>[(_(!0),F(O,null,j(S(e).viewingProduct.images,(g,b)=>(_(),I(fe,{hover:"",height:"100",width:"100",class:L(["mb-3",{"border-lg border-secondary border-opacity-100":S(i)===b}]),key:b},{default:m(()=>[g?(_(),I($,{key:0,cover:"","aspect-ratio":"1/1",height:"500",src:g,onClick:v=>i.value=b},null,8,["src","onClick"])):(_(),I($,{key:1,contain:"",height:"500","min-width":"500",src:ne}))]),_:2},1032,["class"]))),128))]),_:1},8,["class"]),u(k,{cols:"12",md:"4",lg:"5"},{default:m(()=>[u(Xe,{continuous:"",cycle:"","hide-delimiters":"",direction:"vertical",height:"auto",width:"100%",modelValue:S(i),"onUpdate:modelValue":[y[0]||(y[0]=g=>ze(i)?i.value=g:null),d],"show-arrows":!1},{default:m(()=>[(_(!0),F(O,null,j(S(e).viewingProduct.images,(g,b)=>(_(),I(Ye,{key:b},{default:m(()=>[g?(_(),I($,{key:0,cover:"",width:"100%",height:"100%",class:"rounded-lg",src:g,onClick:v=>l.value=g},null,8,["src","onClick"])):(_(),I($,{key:1,contain:"","min-width":"500",src:ne}))]),_:2},1024))),128))]),_:1},8,["modelValue"])]),_:1}),u(k,{cols:"12",md:"5",lg:"4",class:"flex-grow-1"},{default:m(()=>{var g;return[A("h3",At,B((g=S(e).viewingProduct.category)==null?void 0:g.name),1),A("h1",Rt,B(S(e).viewingProduct.title),1),A("h2",null,B(S(e).viewingProduct.currency)+B(S(e).viewingProduct.price),1),A("p",Ft,B(S(e).viewingProduct.description),1),u(V,{"no-gutters":"",justify:"space-between",class:L(["my-4",{"ga-2":S(a)}])},{default:m(()=>[u(k,{cols:"12",md:"5"},{default:m(()=>[u(p,{modelValue:S(e).viewingProduct.quantity,"onUpdate:modelValue":y[1]||(y[1]=b=>S(e).viewingProduct.quantity=b)},null,8,["modelValue"])]),_:1}),u(k,{cols:"12",md:"6"},{default:m(()=>[u(M,{block:"",variant:"outlined",color:"primary",height:"48",onClick:f},{default:m(()=>[X(" Add to Cart")]),_:1})]),_:1})]),_:1},8,["class"]),u(M,{block:"",variant:"flat",color:"primary",size:"x-large",class:"font-weight-bold",onClick:c},{default:m(()=>[X("Buy Now")]),_:1})]}),_:1})]),_:1}),u(V,{justify:"center",class:"mt-15"},{default:m(()=>[u(k,{cols:"12",sm:"10"},{default:m(()=>[u(Tt,{"category-id":S(s)},null,8,["category-id"])]),_:1})]),_:1})]),_:1}))}}});export{Jt as default};
